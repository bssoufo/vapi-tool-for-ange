# Manager Assistant Function Tools

functions:
  - name: queryKnowledgeBase
    description: "Query the clinic knowledge base for information about treatments, pricing, policies, insurance, and general questions"
    server:
      url: "https://n8n-2-u19609.vm.elestio.app/webhook/cdda2586-cb51-472a-814f-34c4f2bbcf06"
    parameters:
      type: object
      required:
        - query
      properties:
        query:
          type: string
          description: "The user's question or information request"

  - name: findAppointment
    description: "Searches for a user's upcoming appointments using their phone number. This is the required FIRST STEP before modifying or cancelling an appointment."
    server:
      url: "https://n8n-2-u19609.vm.elestio.app/webhook/4612e97d-49e8-4a13-8df9-69cef8505f38"
    parameters:
      type: object
      required:
        - phoneNumber
      properties:
        phoneNumber:
          type: string
          description: "The user's phone number to search for existing appointments."

  - name: lookupAppointment
    description: "Look up existing appointments for a patient using their name"
    server:
      url: "https://n8n-2-u19609.vm.elestio.app/webhook/4612e97d-49e8-4a13-8df9-69cef8505f38"
    parameters:
      type: object
      required:
        - firstName
        - lastName
      properties:
        lastName:
          type: string
          description: "Patient's last name"
        firstName:
          type: string
          description: "Patient's first name"

  - name: cancelAppointment
    description: "Cancels an existing appointment after it has been found and confirmed with the user."
    server:
      url: "https://n8n-2-u19609.vm.elestio.app/webhook/4612e97d-49e8-4a13-8df9-69cef8505f38"
    parameters:
      type: object
      required:
        - eventId
        - calendarId
      properties:
        eventId:
          type: string
          description: "The unique ID of the event to be cancelled. This MUST be obtained from the result of a `findAppointment` call."
        calendarId:
          type: string
          description: "The unique ID of the calendar the event is on. This MUST be obtained from the result of a `findAppointment` call."

  - name: modifyAppointment
    description: "Updates an existing appointment to a new time. Requires the original event details and the new desired time slot details."
    server:
      url: "https://n8n-2-u19609.vm.elestio.app/webhook/4612e97d-49e8-4a13-8df9-69cef8505f38"
    parameters:
      type: object
      required:
        - originalEvent
        - newStartTimeISO
        - newEndTimeISO
        - newDoctorName
      properties:
        newDoctorName:
          enum:
            - "Daniel"
            - "James"
            - "Metha"
          type: string
          description: "The doctor for the rescheduled appointment (can be same or different from original)"
        newEndTimeISO:
          type: string
          description: "The new end time for the appointment in ISO 8601 format. Obtained from a new `checkAvailability` call."
        originalEvent:
          type: object
          required:
            - eventId
            - calendarId
          properties:
            eventId:
              type: string
            calendarId:
              type: string
          description: "An object containing the eventId and calendarId of the appointment to be changed. Obtained from the `findAppointment` tool."
        newStartTimeISO:
          type: string
          description: "The new start time for the appointment in ISO 8601 format. Obtained from a new `checkAvailability` call."