# Routing Destinations Configuration
# Define how assistants can transfer to each other or external systems

# Assistant-to-Assistant transfers
assistant_destinations:
  triage_to_booking:
    type: assistant
    source: "real-estate-triage"
    target: "real-estate-booking"
    conditions:
      - keywords: ["schedule", "appointment", "viewing", "tour", "consultation", "meet", "visit"]
      - intent: "booking_request"
    message: ""

  triage_to_info:
    type: assistant
    source: "real-estate-triage"
    target: "real-estate-info"
    conditions:
      - keywords: ["price", "details", "features", "neighborhood", "market", "compare", "search", "find"]
      - intent: "information_request"
    message: ""

  booking_to_info:
    type: assistant
    source: "real-estate-booking"
    target: "real-estate-info"
    conditions:
      - intent: "property_details_needed"
      - keywords: ["details", "more info", "market trends", "property history", "neighborhood"]
    message: ""

  info_to_booking:
    type: assistant
    source: "real-estate-info"
    target: "real-estate-booking"
    conditions:
      - intent: "schedule_after_info"
      - keywords: ["schedule viewing", "book appointment", "see the property", "schedule consultation"]
    message: ""

  booking_to_triage:
    type: assistant
    source: "real-estate-booking"
    target: "real-estate-triage"
    conditions:
      - intent: "general_help"
      - keywords: ["other questions", "different help", "main menu"]
    message: ""

  info_to_triage:
    type: assistant
    source: "real-estate-info"
    target: "real-estate-triage"
    conditions:
      - intent: "general_help"
      - keywords: ["other questions", "different help", "main menu"]
    message: ""

# External system transfers
external_destinations:
  broker_manager:
    type: number
    number: "${BROKER_MANAGER_PHONE}"
    sources: ["real-estate-triage", "real-estate-booking", "real-estate-info"]
    conditions:
      - keywords: ["manager", "supervisor", "complaint", "escalate", "complex issue"]
      - intent: "escalation"
    message: ""

  emergency_line:
    type: number
    number: "${EMERGENCY_CONTACT}"
    sources: ["real-estate-triage"]
    conditions:
      - keywords: ["emergency", "urgent", "property emergency", "immediate help"]
      - urgency: "critical"
    message: ""

  legal_department:
    type: number
    number: "${LEGAL_DEPT_PHONE}"
    sources: ["real-estate-info", "real-estate-booking"]
    conditions:
      - keywords: ["legal", "contract", "dispute", "attorney", "legal advice"]
      - complexity: "legal"
    message: ""

  financing_specialist:
    type: number
    number: "${FINANCING_PHONE}"
    sources: ["real-estate-info", "real-estate-booking"]
    conditions:
      - keywords: ["mortgage", "financing", "loan", "credit", "pre-approval"]
      - intent: "financing_inquiry"
    message: ""

# After-hours and special routing
after_hours_destinations:
  after_hours_voicemail:
    type: voicemail
    number: "${MAIN_VOICEMAIL}"
    active_hours: "18:01-08:59"
    message: ""

  weekend_emergency:
    type: assistant
    target: "real-estate-triage"
    active_days: ["saturday", "sunday"]
    conditions:
      - keywords: ["emergency", "urgent"]
    message: ""

  holiday_routing:
    type: voicemail
    number: "${HOLIDAY_VOICEMAIL}"
    active_during: "holidays"
    message: ""